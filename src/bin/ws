#!/bin/bash

source `dirname $0`/assert_regimentd

if [ ! -f "$1" ];
then echo Usage: "ws <file> <option> ...";
     if [ "$1" != "" ]; then echo   File \"$1\" does not exist.; 
     else cat $WAVESCRIPTD/bin/ws_opts.txt
     fi
     exit 1;
fi

if [ "$WAVESCRIPTEXEC" == "" ]; then WAVESCRIPTEXEC=$WAVESCRIPTD/bin/regiment; fi

D=`dirname "$1"`
B=`basename "$1"`
abspath="`cd \"$D\" 2>/dev/null && pwd || echo \"$D\"`/$B"
shift

#echo WS CALLING "$WAVESCRIPTEXEC" wsint $abspath ${1+"$@"}

(export WAVESCRIPT_OR_WAVESCRIPT=WS; "$WAVESCRIPTEXEC" wsint $abspath ${1+"$@"};)
